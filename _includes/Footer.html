<div class="footer">
{%- if site.copyright.msg != nil and site.copyright.msg != empty and site.copyright.msg != null -%}
<div id="copyright">
    <p id="copyright-notice">Â© {{site.copyright.msg}}. {{site.copyright.year}}</p>
</div> 
{%- endif -%}
</div>
<script async src="/assets/js/photoswipe.umd.min.js"></script>
<script async src="/assets/js/photoswipe-lightbox.umd.min.js"></script>
<script>
function searchInitListener() {
  let searchInput = document.getElementById("search-input");
  if (window.location.pathname == "/search/") {
    searchInput.focus();
  }
  document.onkeyup = function (e) {
    var evt = window.event || e;
    let key = evt.keyCode || evt.which;
    if (e.shiftKey && key == 83) {
      if (searchInput) {
        searchInput.focus();
      } else {
          window.location.href = "/search";
      }
    }
  };
}
searchInitListener();

function prepareImagesForLightbox() {
    let images = document.querySelectorAll('article section img');
    for (let i = 0; i < images.length; i++) {
        let img = images[i];
        let a = document.createElement('a');
        a.href = img.src;
        a.classList.add('ps');
        a.dataset.pswpWidth = img.naturalWidth;
        a.dataset.pswpHeight = img.naturalHeight;
        img.parentNode.insertBefore(a, img);
        a.appendChild(img);
    }
    var lightbox = new PhotoSwipeLightbox({
        gallery: 'article section',
        children: 'a.ps',
        pswpModule: PhotoSwipe
    });
    lightbox.init();
}
window.addEventListener('load', prepareImagesForLightbox);

var paths = document.querySelectorAll('.name-svg path');
var lastPathIndex = paths.length - 1;
[].slice.call(paths).map(function(path) {
  path.setAttribute('stroke-dasharray', path.getTotalLength());
  path.setAttribute('stroke-dashoffset', path.getTotalLength());
});
animateNamePath(paths[0], 0);
function animateNamePath(path, index) {
  function step() {
        var value = parseFloat(path.getAttribute('stroke-dashoffset'));
        if (value <= 1) {
          if (index < lastPathIndex) {
            animateNamePath(paths[index + 1], index + 1);
          }
          return;
        }
        var speed = value > 100 ? 12 : (value > 75 ? 10 : (value > 50 ? 8 : (value > 25 ? 6 : 1)));
        path.setAttribute('stroke-dashoffset', value - speed);
        requestAnimationFrame(step);
      }
      requestAnimationFrame(step);
    }
</script>
